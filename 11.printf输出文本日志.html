<html>
<head>
  <title>11.printf输出文本日志</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="330"/>
<h1>11.printf输出文本日志</h1>

<div>
<span><div><font style="font-family: 楷体; font-size: 14pt;"><b>1.重新定向</b></font></div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 255);">FILE</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">*</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">stream</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">NULL</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">;</span></font></div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">stream</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(136, 0, 0);">freopen</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(163, 21, 21);">&quot;a&quot;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">stdout</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);"><br/></span></font></div><div><span style="font-family: 楷体; font-size: 14pt; font-weight: bold; color: rgb(1, 1, 1);">2.创建目录</span></div><div><span style="min-height: 11pt; font-size: 14pt; font-family: Consolas; color: rgb(136, 0, 0);">CreateDirectory</span><span style="min-height: 11pt; font-size: 14pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-size: 14pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-size: 14pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-size: 14pt; font-family: Consolas; color: rgb(160, 0, 160);">NULL</span><span style="min-height: 11pt; font-size: 14pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></div><div><span style="font-family: 楷体; font-size: 14pt; font-weight: bold; color: rgb(1, 1, 1);"><br/></span></div><div><span style="font-family: 楷体; font-size: 14pt; font-weight: bold; color: rgb(1, 1, 1);">例子：</span></div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 255);">char</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">*</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">pStrOne</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(163, 21, 21);">&quot;ProtroalDebugData&quot;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">;</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 255);">char</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">*</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">pStrTwo</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(163, 21, 21);">&quot;\\\\&quot;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">;</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 255);">char</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">StrThree</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">[50];</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(136, 0, 0);">memset</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">StrThree</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,0,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 255);">sizeof</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">StrThree</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">));</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(136, 0, 0);">memset</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,0,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 255);">sizeof</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">));</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">sprintf</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">StrThree</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(163, 21, 21);">&quot;%d-%d-%d_%d_%d_%d.txt&quot;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tmNow</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">-&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tm_year</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">+1900,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tmNow</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">-&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tm_mon</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tmNow</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">-&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tm_mday</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tmNow</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">-&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tm_hour</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tmNow</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">-&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tm_min</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tmNow</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">-&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">tm_sec</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">strcat</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">pStrOne</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">strcat</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">pStrTwo</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(136, 0, 0);">CreateDirectory</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">NULL</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">strcat</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">StrThree</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div style="min-height: 11pt;"><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">stream</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(136, 0, 0);">freopen</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 128);">logFileName</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(163, 21, 21);">&quot;a&quot;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">stdout</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(136, 0, 0);">UpdateData</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(160, 0, 160);">TRUE</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(1, 1, 1);">);</span></font></div></span>
</div></body></html> 